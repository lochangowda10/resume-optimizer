<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Resume Optimizer Pro - ATS Score & Smart Suggestions</title>
    <style>
        :root {
            --color-primary: #2563eb;
            --color-primary-hover: #1d4ed8;
            --color-success: #10b981;
            --color-warning: #f59e0b;
            --color-danger: #ef4444;
            --color-bg: #f8fafc;
            --color-surface: #ffffff;
            --color-text: #1e293b;
            --color-text-secondary: #64748b;
            --color-border: #e2e8f0;
            --color-purple: #8b5cf6;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: var(--color-text);
        }

        .login-container {
            max-width: 400px;
            margin: 100px auto;
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .login-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .login-header h1 {
            font-size: 1.8rem;
            color: var(--color-primary);
            margin-bottom: 10px;
        }

        .login-header p {
            color: var(--color-text-secondary);
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: var(--color-text);
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--color-border);
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--color-primary);
        }

        .btn-group-horizontal {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
        }

        .btn {
            flex: 1;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: var(--color-primary);
            color: white;
            flex: 2;
        }

        .btn-primary:hover {
            background: var(--color-primary-hover);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: var(--color-border);
            color: var(--color-text);
        }

        .btn-secondary:hover {
            background: #d1d5db;
        }

        .message {
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 16px;
            text-align: center;
            font-weight: 600;
        }

        .message.error {
            background: rgba(239, 68, 68, 0.1);
            color: var(--color-danger);
            border: 1px solid var(--color-danger);
        }

        .message.success {
            background: rgba(16, 185, 129, 0.1);
            color: var(--color-success);
            border: 1px solid var(--color-success);
        }

        .demo-users {
            background: var(--color-bg);
            padding: 16px;
            border-radius: 8px;
            margin-top: 20px;
            border: 1px solid var(--color-border);
        }

        .demo-users h3 {
            font-size: 0.9rem;
            color: var(--color-text-secondary);
            margin-bottom: 8px;
        }

        .demo-user {
            padding: 8px;
            background: white;
            border-radius: 6px;
            margin-bottom: 6px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid var(--color-border);
        }

        .demo-user:hover {
            background: var(--color-primary);
            color: white;
            border-color: var(--color-primary);
        }

        .demo-user strong {
            display: block;
            font-size: 0.85rem;
        }

        .demo-user span {
            display: block;
            font-size: 0.75rem;
            opacity: 0.8;
            margin-top: 2px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header-right {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .user-info {
            background: rgba(255,255,255,0.2);
            padding: 8px 16px;
            border-radius: 8px;
            color: white;
            font-size: 0.9rem;
        }

        .btn-logout {
            background: rgba(255,255,255,0.3);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-logout:hover {
            background: rgba(255,255,255,0.5);
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 12px;
        }

        .tab-btn {
            flex: 1;
            padding: 12px 24px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .tab-btn.active {
            background: white;
            color: var(--color-primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .card {
            background: var(--color-surface);
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .card h2 {
            margin-bottom: 16px;
            color: var(--color-text);
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        textarea {
            width: 100%;
            min-height: 350px;
            padding: 12px;
            border: 2px solid var(--color-border);
            border-radius: 8px;
            font-size: 0.95rem;
            font-family: monospace;
            resize: vertical;
            transition: border-color 0.3s;
        }

        textarea:focus {
            outline: none;
            border-color: var(--color-primary);
        }

        .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 12px;
            flex-wrap: wrap;
        }

        .score-display {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            color: white;
            margin-bottom: 20px;
        }

        .score-number {
            font-size: 4rem;
            font-weight: bold;
            margin: 10px 0;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-bottom: 20px;
        }

        .stat-box {
            background: var(--color-surface);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--color-primary);
            margin-bottom: 8px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--color-text-secondary);
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .user-card {
            background: var(--color-surface);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            border-left: 4px solid var(--color-primary);
        }

        .user-card h3 {
            margin-bottom: 12px;
            color: var(--color-text);
            font-size: 1.1rem;
        }

        .user-stat {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            padding: 6px 0;
            border-bottom: 1px solid var(--color-border);
            font-size: 0.9rem;
        }

        .user-stat strong {
            color: var(--color-primary);
        }

        .users-table {
            width: 100%;
            border-collapse: collapse;
            background: var(--color-surface);
            border-radius: 12px;
            overflow: hidden;
        }

        .users-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 16px;
            text-align: left;
            font-weight: 600;
        }

        .users-table td {
            padding: 16px;
            border-bottom: 1px solid var(--color-border);
        }

        .users-table tr:hover {
            background: var(--color-bg);
        }

        .score-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .score-badge.high {
            background: rgba(16, 185, 129, 0.2);
            color: var(--color-success);
        }

        .score-badge.medium {
            background: rgba(245, 158, 11, 0.2);
            color: var(--color-warning);
        }

        .score-badge.low {
            background: rgba(239, 68, 68, 0.2);
            color: var(--color-danger);
        }

        .action-btn {
            background: var(--color-primary);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
        }

        .action-btn:hover {
            background: var(--color-primary-hover);
        }

        .analysis-item {
            padding: 16px;
            border-radius: 8px;
            border-left: 4px solid;
            margin-bottom: 12px;
        }

        .analysis-item.good {
            background: rgba(16, 185, 129, 0.1);
            border-color: var(--color-success);
        }

        .analysis-item.warning {
            background: rgba(245, 158, 11, 0.1);
            border-color: var(--color-warning);
        }

        .analysis-item.error {
            background: rgba(239, 68, 68, 0.1);
            border-color: var(--color-danger);
        }

        .analysis-item h3 {
            font-size: 1.1rem;
            margin-bottom: 8px;
        }

        .analysis-item p {
            color: var(--color-text-secondary);
            font-size: 0.95rem;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .header {
                flex-direction: column;
                gap: 16px;
            }
        }

        .keyword-tag {
            display: inline-block;
            padding: 6px 12px;
            background: var(--color-primary);
            color: white;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
            margin: 4px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 12px;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            width: 90%;
        }

        .modal-header {
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            color: var(--color-primary);
        }

        .close-btn {
            background: var(--color-border);
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            width: 30px;
            height: 30px;
            border-radius: 6px;
            transition: all 0.2s;
        }

        .close-btn:hover {
            background: var(--color-danger);
            color: white;
        }

        .upload-section {
            margin-bottom: 16px;
            padding: 20px;
            border: 2px dashed var(--color-border);
            border-radius: 8px;
            text-align: center;
            background: var(--color-bg);
        }
    </style>
</head>
<body>
    <!-- Login Page -->
    <div id="loginPage" class="login-container">
        <div class="login-header">
            <h1>üöÄ Resume Optimizer Pro</h1>
            <p>AI-Powered ATS Score & Analysis</p>
        </div>

        <div id="loginMessage"></div>

        <!-- Login Form -->
        <div id="loginForm">
            <div class="form-group">
                <label for="loginEmail">Email Address</label>
                <input type="email" id="loginEmail" placeholder="Enter your email" onkeypress="if(event.key==='Enter') loginUser()">
            </div>

            <div class="form-group">
                <label for="loginPassword">Password</label>
                <input type="password" id="loginPassword" placeholder="Enter your password" onkeypress="if(event.key==='Enter') loginUser()">
            </div>
        </div>

        <!-- Sign Up Form -->
        <div id="signupForm" style="display: none;">
            <div class="form-group">
                <label for="signupName">Full Name</label>
                <input type="text" id="signupName" placeholder="Enter your full name">
            </div>

            <div class="form-group">
                <label for="signupEmail">Email Address</label>
                <input type="email" id="signupEmail" placeholder="Enter your email">
            </div>

            <div class="form-group">
                <label for="signupPassword">Password</label>
                <input type="password" id="signupPassword" placeholder="Create a password (min 6 chars)" onkeypress="if(event.key==='Enter') createAccount()">
            </div>

            <div class="form-group">
                <label for="signupConfirmPassword">Confirm Password</label>
                <input type="password" id="signupConfirmPassword" placeholder="Confirm your password" onkeypress="if(event.key==='Enter') createAccount()">
            </div>
        </div>

        <!-- Login/Signup Buttons -->
        <div id="loginButtons" class="btn-group-horizontal">
            <button class="btn btn-primary" onclick="loginUser()">üîì Login</button>
            <button class="btn btn-secondary" onclick="toggleSignupForm()">üìù Sign Up</button>
        </div>

        <!-- Back Button (hidden for signup) -->
        <button class="btn btn-secondary" id="backButton" style="width: 100%; margin-bottom: 16px; display: none;" onclick="backToLogin()">‚Üê Back to Login</button>

        <!-- Create Account Button (hidden for login) -->
        <button class="btn btn-primary" id="createButton" style="width: 100%; margin-bottom: 16px; display: none;" onclick="createAccount()">‚úÖ Create Account</button>

        <button class="btn btn-secondary" style="width: 100%; margin-bottom: 16px;" onclick="toggleDeveloperMode()">üë®‚Äçüíª Developer Access</button>

        <div class="demo-users" id="demo-users">
            <h3>üìã Demo Users (Click to auto-fill):</h3>
            <div class="demo-user" onclick="fillDemoUser('user1@email.com', 'pass123')">
                <strong>User 1</strong>
                <span>user1@email.com / pass123</span>
            </div>
            <div class="demo-user" onclick="fillDemoUser('user2@email.com', 'pass456')">
                <strong>User 2</strong>
                <span>user2@email.com / pass456</span>
            </div>
            <div class="demo-user" onclick="fillDemoUser('admin@email.com', 'admin123')">
                <strong>Admin</strong>
                <span>admin@email.com / admin123</span>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="mainApp" style="display: none;">
        <div class="container">
            <div class="header">
                <div>
                    <h1>üöÄ AI Resume Optimizer Pro</h1>
                    <p>Get instant ATS compatibility score, job matching, and AI-powered suggestions</p>
                </div>
                <div class="header-right">
                    <div class="user-info">
                        üë§ <span id="currentUserName"></span>
                    </div>
                    <button class="btn-logout" onclick="logoutUser()">üö™ Logout</button>
                </div>
            </div>

            <div class="tabs">
                <button class="tab-btn active" onclick="switchTab('basic', this)">üìÑ Basic Analysis</button>
                <button class="tab-btn" onclick="switchTab('matcher', this)">üéØ Job Matcher</button>
                <button class="tab-btn" onclick="switchTab('industry', this)">üè¢ Industry Optimizer</button>
                <button class="tab-btn" onclick="switchTab('profile', this)">üë§ User Profile</button>
                <button class="tab-btn" onclick="switchTab('developer', this)" id="developerTabBtn" style="display: none;">üë®‚Äçüíª Developer Console</button>
            </div>

            <!-- Basic Analysis Tab -->
            <div id="basic" class="tab-content active">
                <div class="main-content">
                    <div class="card">
                        <h2><span>üìù</span> Your Resume</h2>
                        
                        <div class="upload-section">
                            <p style="margin-bottom: 12px; color: var(--color-text-secondary);"><strong>üìÑ Upload PDF, Image, or Document</strong></p>
                            <input type="file" id="fileUpload" accept=".pdf,.jpg,.jpeg,.png,.doc,.docx" style="display: none;" onchange="handleFileUpload(event)">
                            <button class="btn btn-primary" onclick="document.getElementById('fileUpload').click()">üìÅ Choose File</button>
                            <p style="margin-top: 8px; font-size: 0.85rem; color: var(--color-text-secondary);">Supports: PDF, JPG, PNG, DOC, DOCX</p>
                        </div>
                        
                        <div style="text-align: center; margin: 12px 0; color: var(--color-text-secondary); font-weight: 600;">OR</div>
                        
                        <textarea id="resumeText" placeholder="Paste your resume text here..."></textarea>
                        <div class="btn-group">
                            <button class="btn btn-primary" onclick="analyzeAndSaveResume()">üîç Analyze & Save</button>
                            <button class="btn btn-secondary" onclick="loadExample()">üìã Load Example</button>
                            <button class="btn btn-secondary" onclick="clearAll()">üóëÔ∏è Clear</button>
                        </div>
                    </div>

                    <div class="card">
                        <h2><span>üìä</span> ATS Score</h2>
                        <div id="scoreDisplay" class="score-display">
                            <div style="opacity: 0.9;">Your ATS Score</div>
                            <div class="score-number" id="atsScore">--</div>
                            <div style="opacity: 0.9;" id="scoreMessage">Upload resume to get score</div>
                        </div>

                        <div class="stats-grid">
                            <div class="stat-box">
                                <div class="stat-value" id="wordCount">--</div>
                                <div class="stat-label">Words</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-value" id="keywordCount">--</div>
                                <div class="stat-label">Keywords</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-value" id="sectionCount">--</div>
                                <div class="stat-label">Sections</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-value" id="bulletCount">--</div>
                                <div class="stat-label">Bullet Points</div>
                            </div>
                        </div>

                        <div id="analysisSection"></div>
                        <div id="keywordsSection"></div>
                    </div>
                </div>
            </div>

            <!-- Job Matcher Tab -->
            <div id="matcher" class="tab-content">
                <div class="main-content">
                    <div class="card">
                        <h2><span>üìù</span> Your Resume</h2>
                        <textarea id="resumeTextMatcher" placeholder="Paste your resume text here..."></textarea>
                    </div>

                    <div class="card">
                        <h2><span>üíº</span> Job Description</h2>
                        <textarea id="jobDescription" placeholder="Paste the job description you're applying for..."></textarea>
                    </div>
                </div>

                <div class="card">
                    <button class="btn btn-primary" onclick="matchResume()">üéØ Match Resume to Job</button>
                    
                    <div style="margin-top: 20px;">
                        <h3>Job Match Score</h3>
                        <div style="width: 100%; height: 30px; background: #e5e7eb; border-radius: 15px; overflow: hidden; margin: 12px 0;">
                            <div id="matchFill" style="height: 100%; background: linear-gradient(90deg, #ef4444, #f59e0b, #10b981); transition: width 0.5s ease; display: flex; align-items: center; justify-content: flex-end; padding-right: 10px; color: white; font-weight: bold; width: 0%">0%</div>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                        <div>
                            <h3>‚úÖ Skills Matched</h3>
                            <ul id="matchedSkills" style="list-style: none;"></ul>
                        </div>
                        <div>
                            <h3>‚ùå Missing Skills</h3>
                            <ul id="missingSkills" style="list-style: none;"></ul>
                        </div>
                    </div>

                    <div id="matchAnalysis" style="margin-top: 20px;"></div>
                </div>
            </div>

            <!-- Industry Optimizer Tab -->
            <div id="industry" class="tab-content">
                <div class="card">
                    <h2><span>üè¢</span> Industry-Specific Optimization</h2>
                    
                    <div style="margin-bottom: 16px;">
                        <label for="industrySelect"><strong>Select Your Target Industry:</strong></label>
                        <select id="industrySelect" onchange="updateIndustryKeywords()" style="width: 100%; padding: 10px; border: 2px solid var(--color-border); border-radius: 8px; font-size: 1rem; margin-top: 8px;">
                            <option value="tech">Technology & Software</option>
                            <option value="finance">Finance & Banking</option>
                            <option value="healthcare">Healthcare & Medical</option>
                            <option value="marketing">Marketing & Sales</option>
                            <option value="engineering">Engineering</option>
                            <option value="education">Education</option>
                            <option value="creative">Creative & Design</option>
                        </select>
                    </div>

                    <textarea id="resumeTextIndustry" placeholder="Paste your resume text here..."></textarea>
                    
                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="analyzeIndustry()">üîç Analyze for Industry</button>
                    </div>

                    <div id="industryAnalysis" style="margin-top: 20px;"></div>
                    <div id="industryKeywords" style="margin-top: 20px;"></div>
                </div>
            </div>

            <!-- Developer Console Tab -->
            <div id="developer" class="tab-content">
                <div class="card">
                    <h2><span>üë®‚Äçüíª</span> Developer Console - User Data Access</h2>
                    
                    <div style="margin-bottom: 20px; padding: 16px; background: var(--color-bg); border-radius: 8px; border-left: 3px solid var(--color-warning);">
                        <strong>‚ö†Ô∏è Developer Mode:</strong> View and manage all user data in the system. Use responsibly.
                    </div>

                    <div style="margin-bottom: 20px;">
                        <h3>üîç All Users & Data</h3>
                        <button class="btn btn-primary" onclick="refreshAllUserData()">üîÑ Refresh Data</button>
                        <button class="btn btn-secondary" onclick="exportAllUserData()">üì• Export All (JSON)</button>
                    </div>

                    <div id="developerConsole"></div>
                </div>
            </div>

            <!-- User Profile Tab -->
            <div id="profile" class="tab-content">
                <div class="card" style="max-width: 800px; margin: 0 auto;">
                    <h2><span>üë§</span> Your Profile & Saved Analyses</h2>
                    
                    <div id="profileData" style="display: none;">
                        <h3 style="color: var(--color-primary); margin: 20px 0 12px 0;">üìã Personal Information</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; margin-bottom: 20px;">
                            <div style="padding: 12px; background: var(--color-bg); border-radius: 8px; border-left: 3px solid var(--color-primary);">
                                <strong style="display: block; color: var(--color-text-secondary); font-size: 0.85rem; margin-bottom: 4px;">Full Name:</strong>
                                <span id="profileName">--</span>
                            </div>
                            <div style="padding: 12px; background: var(--color-bg); border-radius: 8px; border-left: 3px solid var(--color-primary);">
                                <strong style="display: block; color: var(--color-text-secondary); font-size: 0.85rem; margin-bottom: 4px;">Email:</strong>
                                <span id="profileEmail">--</span>
                            </div>
                            <div style="padding: 12px; background: var(--color-bg); border-radius: 8px; border-left: 3px solid var(--color-primary);">
                                <strong style="display: block; color: var(--color-text-secondary); font-size: 0.85rem; margin-bottom: 4px;">Phone:</strong>
                                <span id="profilePhone">--</span>
                            </div>
                            <div style="padding: 12px; background: var(--color-bg); border-radius: 8px; border-left: 3px solid var(--color-primary);">
                                <strong style="display: block; color: var(--color-text-secondary); font-size: 0.85rem; margin-bottom: 4px;">Location:</strong>
                                <span id="profileLocation">--</span>
                            </div>
                        </div>

                        <h3 style="color: var(--color-primary); margin: 20px 0 12px 0;">üìä Analysis History</h3>
                        <div id="userAnalysisHistory"></div>

                        <div style="margin-top: 20px;">
                            <button class="btn btn-primary" onclick="exportUserData()">üì• Export My Data</button>
                        </div>
                    </div>

                    <div id="profileEmpty" style="text-align: center; padding: 40px; color: var(--color-text-secondary);">
                        <p style="font-size: 3rem; margin-bottom: 16px;">üë§</p>
                        <h3 style="margin-bottom: 8px;">No Analysis Yet</h3>
                        <p>Analyze a resume in the Basic Analysis tab to see your profile and history here.</p>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script>
        // Enhanced keyword database
        const industryKeywords = {
            tech: {
                skills: ['JavaScript', 'Python', 'Java', 'React', 'Node.js', 'SQL', 'AWS', 'Docker', 'Kubernetes', 'Git', 'API', 'Agile', 'Scrum', 'TypeScript', 'MongoDB', 'PostgreSQL', 'CI/CD', 'DevOps', 'Machine Learning', 'AI'],
                verbs: ['Developed', 'Implemented', 'Architected', 'Deployed', 'Optimized', 'Automated', 'Debugged', 'Refactored', 'Integrated', 'Scaled']
            },
            finance: {
                skills: ['Financial Analysis', 'Excel', 'Risk Management', 'Portfolio Management', 'Bloomberg Terminal', 'Financial Modeling', 'Compliance', 'Accounting', 'GAAP', 'SAP', 'QuickBooks', 'Budgeting', 'Forecasting', 'Trading', 'Investment'],
                verbs: ['Analyzed', 'Forecasted', 'Managed', 'Audited', 'Reconciled', 'Evaluated', 'Advised', 'Mitigated', 'Optimized', 'Reported']
            },
            healthcare: {
                skills: ['Patient Care', 'EMR/EHR', 'HIPAA', 'Medical Terminology', 'Clinical Research', 'Healthcare Management', 'CPR', 'Epic Systems', 'Medicare', 'Medicaid', 'Nursing', 'Diagnostics', 'Treatment Planning'],
                verbs: ['Treated', 'Diagnosed', 'Administered', 'Coordinated', 'Evaluated', 'Monitored', 'Documented', 'Educated', 'Collaborated', 'Improved']
            },
            marketing: {
                skills: ['Digital Marketing', 'SEO', 'SEM', 'Google Analytics', 'Content Marketing', 'Social Media', 'Email Marketing', 'Marketing Automation', 'CRM', 'Salesforce', 'HubSpot', 'Campaign Management', 'Brand Strategy', 'PPC', 'A/B Testing'],
                verbs: ['Launched', 'Executed', 'Generated', 'Increased', 'Optimized', 'Managed', 'Developed', 'Analyzed', 'Created', 'Strategized']
            },
            engineering: {
                skills: ['CAD', 'AutoCAD', 'SolidWorks', 'MATLAB', 'Project Management', 'Quality Control', 'Six Sigma', 'Lean Manufacturing', 'PLC', 'Process Improvement', 'R&D', 'Testing', 'Design', 'Prototyping'],
                verbs: ['Designed', 'Engineered', 'Tested', 'Improved', 'Developed', 'Analyzed', 'Optimized', 'Validated', 'Manufactured', 'Implemented']
            },
            education: {
                skills: ['Curriculum Development', 'Classroom Management', 'Lesson Planning', 'Educational Technology', 'Assessment', 'Student Engagement', 'Google Classroom', 'Canvas LMS', 'Differentiated Instruction', 'Parent Communication'],
                verbs: ['Taught', 'Developed', 'Facilitated', 'Mentored', 'Assessed', 'Implemented', 'Collaborated', 'Designed', 'Evaluated', 'Guided']
            },
            creative: {
                skills: ['Adobe Creative Suite', 'Photoshop', 'Illustrator', 'InDesign', 'Figma', 'Sketch', 'UI/UX Design', 'Typography', 'Branding', 'Video Editing', 'After Effects', 'Premiere Pro', 'Graphic Design', 'Web Design'],
                verbs: ['Designed', 'Created', 'Illustrated', 'Conceptualized', 'Produced', 'Directed', 'Edited', 'Developed', 'Crafted', 'Visualized']
            }
        };

        // Authentication & Data Management
        let currentUser = null;
        let allUsers = {};

        // Initialize app
        function initApp() {
            loadUsersFromStorage();
            createDefaultUsers();
        }

        function createDefaultUsers() {
            if (!allUsers['user1@email.com']) {
                allUsers['user1@email.com'] = {
                    name: 'User One',
                    email: 'user1@email.com',
                    password: 'pass123',
                    analyses: [],
                    createdAt: new Date().toISOString()
                };
            }
            if (!allUsers['user2@email.com']) {
                allUsers['user2@email.com'] = {
                    name: 'User Two',
                    email: 'user2@email.com',
                    password: 'pass456',
                    analyses: [],
                    createdAt: new Date().toISOString()
                };
            }
            if (!allUsers['admin@email.com']) {
                allUsers['admin@email.com'] = {
                    name: 'Admin User',
                    email: 'admin@email.com',
                    password: 'admin123',
                    isAdmin: true,
                    analyses: [],
                    createdAt: new Date().toISOString()
                };
            }
            saveUsersToStorage();
        }

        function loadUsersFromStorage() {
            const stored = localStorage.getItem('resumeOptimizer_users');
            if (stored) {
                allUsers = JSON.parse(stored);
            }
        }

        function saveUsersToStorage() {
            localStorage.setItem('resumeOptimizer_users', JSON.stringify(allUsers));
        }

        function fillDemoUser(email, password) {
            document.getElementById('loginEmail').value = email;
            document.getElementById('loginPassword').value = password;
            document.getElementById('loginMessage').innerHTML = '';
        }

        function toggleSignupForm() {
            const loginForm = document.getElementById('loginForm');
            const signupForm = document.getElementById('signupForm');
            const loginButtons = document.getElementById('loginButtons');
            const backButton = document.getElementById('backButton');
            const createButton = document.getElementById('createButton');
            const messageDiv = document.getElementById('loginMessage');

            if (signupForm.style.display === 'none') {
                // Show signup
                loginForm.style.display = 'none';
                signupForm.style.display = 'block';
                loginButtons.style.display = 'none';
                backButton.style.display = 'block';
                createButton.style.display = 'block';
                messageDiv.innerHTML = '';
            }
        }

        function backToLogin() {
            const loginForm = document.getElementById('loginForm');
            const signupForm = document.getElementById('signupForm');
            const loginButtons = document.getElementById('loginButtons');
            const backButton = document.getElementById('backButton');
            const createButton = document.getElementById('createButton');
            const messageDiv = document.getElementById('loginMessage');

            // Clear signup form
            document.getElementById('signupName').value = '';
            document.getElementById('signupEmail').value = '';
            document.getElementById('signupPassword').value = '';
            document.getElementById('signupConfirmPassword').value = '';

            // Show login
            loginForm.style.display = 'block';
            signupForm.style.display = 'none';
            loginButtons.style.display = 'flex';
            backButton.style.display = 'none';
            createButton.style.display = 'none';
            messageDiv.innerHTML = '';
        }

        function createAccount() {
            const name = document.getElementById('signupName').value.trim();
            const email = document.getElementById('signupEmail').value.trim();
            const password = document.getElementById('signupPassword').value.trim();
            const confirmPassword = document.getElementById('signupConfirmPassword').value.trim();
            const messageDiv = document.getElementById('loginMessage');

            if (!name || !email || !password || !confirmPassword) {
                messageDiv.innerHTML = '<div class="message error">‚ùå Please fill in all fields!</div>';
                return;
            }

            if (password.length < 6) {
                messageDiv.innerHTML = '<div class="message error">‚ùå Password must be at least 6 characters!</div>';
                return;
            }

            if (password !== confirmPassword) {
                messageDiv.innerHTML = '<div class="message error">‚ùå Passwords do not match!</div>';
                return;
            }

            if (allUsers[email]) {
                messageDiv.innerHTML = '<div class="message error">‚ùå Email already exists! Please login or use a different email.</div>';
                return;
            }

            // Validate email format
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                messageDiv.innerHTML = '<div class="message error">‚ùå Please enter a valid email address!</div>';
                return;
            }

            // Create new user
            allUsers[email] = {
                name: name,
                email: email,
                password: password,
                analyses: [],
                createdAt: new Date().toISOString()
            };

            saveUsersToStorage();
            messageDiv.innerHTML = '<div class="message success">‚úÖ Account created successfully! Logging you in...</div>';

            setTimeout(() => {
                currentUser = allUsers[email];
                currentUser.lastLogin = new Date().toISOString();
                saveUsersToStorage();

                messageDiv.innerHTML = '';
                document.getElementById('loginPage').style.display = 'none';
                document.getElementById('mainApp').style.display = 'block';
                document.getElementById('currentUserName').textContent = currentUser.name;
                loadUserAnalysisHistory();
            }, 1500);
        }

        function loginUser() {
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value.trim();
            const messageDiv = document.getElementById('loginMessage');

            if (!email || !password) {
                messageDiv.innerHTML = '<div class="message error">‚ùå Please enter email and password!</div>';
                return;
            }

            if (allUsers[email] && allUsers[email].password === password) {
                currentUser = allUsers[email];
                currentUser.email = email;
                currentUser.lastLogin = new Date().toISOString();
                saveUsersToStorage();
                
                messageDiv.innerHTML = '';
                document.getElementById('loginPage').style.display = 'none';
                document.getElementById('mainApp').style.display = 'block';
                
                document.getElementById('currentUserName').textContent = currentUser.name;
                
                loadUserAnalysisHistory();
            } else {
                messageDiv.innerHTML = '<div class="message error">‚ùå Invalid email or password!</div>';
                document.getElementById('loginPassword').value = '';
            }
        }

        function logoutUser() {
            currentUser = null;
            document.getElementById('mainApp').style.display = 'none';
            document.getElementById('loginPage').style.display = 'block';
            document.getElementById('loginEmail').value = '';
            document.getElementById('loginPassword').value = '';
            document.getElementById('loginMessage').innerHTML = '';
            clearAll();
        }

        function switchTab(tabName, buttonElement) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById(tabName).classList.add('active');
            if (buttonElement) {
                buttonElement.classList.add('active');
            }
        }

        function analyzeAndSaveResume() {
            const resumeText = document.getElementById('resumeText').value;
            
            if (!resumeText.trim()) {
                alert('Please paste your resume text or upload a file first!');
                return;
            }

            const analysis = performAnalysis(resumeText);
            displayResults(analysis);
            
            // Save to user's analysis history
            const analysisRecord = {
                timestamp: new Date().toISOString(),
                score: analysis.score,
                wordCount: analysis.wordCount,
                resumePreview: resumeText.substring(0, 200),
                fullAnalysis: analysis
            };
            
            if (!currentUser.analyses) {
                currentUser.analyses = [];
            }
            currentUser.analyses.push(analysisRecord);
            
            // Update user data
            allUsers[currentUser.email] = currentUser;
            saveUsersToStorage();
            
            loadUserAnalysisHistory();
            
            alert('‚úÖ Resume analyzed and saved!');
        }

        function loadUserAnalysisHistory() {
            const historyDiv = document.getElementById('userAnalysisHistory');
            
            if (!currentUser.analyses || currentUser.analyses.length === 0) {
                document.getElementById('profileEmpty').style.display = 'block';
                document.getElementById('profileData').style.display = 'none';
                return;
            }

            document.getElementById('profileData').style.display = 'block';
            document.getElementById('profileEmpty').style.display = 'none';
            
            historyDiv.innerHTML = '';
            
            currentUser.analyses.forEach((analysis, index) => {
                const date = new Date(analysis.timestamp).toLocaleDateString();
                const time = new Date(analysis.timestamp).toLocaleTimeString();
                
                let scoreBadgeClass = 'low';
                if (analysis.score >= 80) scoreBadgeClass = 'high';
                else if (analysis.score >= 60) scoreBadgeClass = 'medium';
                
                historyDiv.innerHTML += `
                    <div style="background: var(--color-bg); padding: 16px; border-radius: 8px; margin-bottom: 12px; border-left: 3px solid var(--color-primary);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                            <strong>Analysis #${index + 1}</strong>
                            <span class="score-badge ${scoreBadgeClass}">${analysis.score}/100</span>
                        </div>
                        <p style="font-size: 0.85rem; color: var(--color-text-secondary); margin: 4px 0;">üìÖ ${date} at ${time}</p>
                        <p style="font-size: 0.85rem; color: var(--color-text-secondary); margin: 4px 0;">üìù Words: ${analysis.wordCount}</p>
                        <p style="font-size: 0.85rem; color: var(--color-text-secondary); margin: 4px 0;">Preview: ${analysis.resumePreview.substring(0, 100)}...</p>
                    </div>
                `;
            });
        }

        let isDeveloperMode = false;

        function toggleDeveloperMode() {
            const password = prompt('üîê Enter developer password to access user data:\n\n(Hint: dev123)');
            if (password === 'dev123') {
                isDeveloperMode = true;
                currentUser = { name: 'Developer', email: 'developer@system', isDeveloper: true };
                
                // Hide login page forms
                document.getElementById('loginForm').style.display = 'none';
                document.getElementById('signupForm').style.display = 'none';
                document.getElementById('loginButtons').style.display = 'none';
                document.getElementById('backButton').style.display = 'none';
                document.getElementById('createButton').style.display = 'none';
                document.getElementById('demo-users').style.display = 'none';
                
                document.getElementById('loginPage').style.display = 'none';
                document.getElementById('mainApp').style.display = 'block';
                document.getElementById('currentUserName').textContent = 'Developer Console';
                document.getElementById('developerTabBtn').style.display = 'block';
                
                // Switch to developer tab
                document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
                document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
                document.getElementById('developer').classList.add('active');
                document.getElementById('developerTabBtn').classList.add('active');
                
                refreshAllUserData();
            } else {
                alert('‚ùå Invalid password! Hint: dev123');
            }
        }

        function refreshAllUserData() {
            const console = document.getElementById('developerConsole');
            console.innerHTML = '';

            let totalStats = `
                <div class="stats-grid" style="margin-bottom: 20px;">
                    <div class="stat-box">
                        <div class="stat-value">${Object.keys(allUsers).length}</div>
                        <div class="stat-label">Total Users</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value">${Object.values(allUsers).reduce((sum, u) => sum + (u.analyses?.length || 0), 0)}</div>
                        <div class="stat-label">Total Analyses</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value">${calculateAverageScore()}</div>
                        <div class="stat-label">Avg Score</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value">${countActiveToday()}</div>
                        <div class="stat-label">Active Today</div>
                    </div>
                </div>
            `;

            console.innerHTML += totalStats;

            console.innerHTML += '<h3 style="margin: 20px 0 12px 0;">üìã All Users Data</h3>';
            
            Object.entries(allUsers).forEach(([email, user]) => {
                const analyses = user.analyses || [];
                let latestScore = '--';
                if (analyses.length > 0) {
                    latestScore = analyses[analyses.length - 1].score;
                }
                
                let scoreBadgeClass = 'low';
                if (latestScore !== '--') {
                    if (latestScore >= 80) scoreBadgeClass = 'high';
                    else if (latestScore >= 60) scoreBadgeClass = 'medium';
                }

                const lastLogin = user.lastLogin ? new Date(user.lastLogin).toLocaleString() : 'Never';
                const created = new Date(user.createdAt).toLocaleString();

                console.innerHTML += `
                    <div style="background: var(--color-bg); padding: 16px; border-radius: 8px; margin-bottom: 16px; border-left: 3px solid var(--color-primary);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                            <div>
                                <h4 style="margin: 0; color: var(--color-text);">${user.name}</h4>
                                <p style="margin: 4px 0; font-size: 0.9rem; color: var(--color-text-secondary);">üìß ${email}</p>
                            </div>
                            <div>
                                ${latestScore !== '--' ? `<span class="score-badge ${scoreBadgeClass}">${latestScore}/100</span>` : '<span class="score-badge low">No Score</span>'}
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; margin-bottom: 12px; font-size: 0.9rem;">
                            <div><strong>üìÖ Created:</strong> ${created}</div>
                            <div><strong>üîê Password:</strong> ${user.password}</div>
                            <div><strong>üíæ Analyses:</strong> ${analyses.length}</div>
                            <div><strong>üë§ Type:</strong> ${user.isAdmin ? 'üë®‚Äçüíº Admin' : user.isDeveloper ? 'üë®‚Äçüíª Developer' : 'üë• Regular User'}</div>
                            <div><strong>‚è∞ Last Login:</strong> ${lastLogin}</div>
                        </div>
                        <button class="btn btn-primary" onclick="viewUserAnalysisDetails('${email}')" style="margin-right: 8px;">üìä View Analyses</button>
                        <button class="btn btn-secondary" onclick="exportUserJSON('${email}')">üì• Export User</button>
                    </div>
                `;
            });
        }

        function viewUserAnalysisDetails(email) {
            const user = allUsers[email];
            const analyses = user.analyses || [];
            
            let details = `<h3 style="color: var(--color-primary); margin: 16px 0 12px 0;">üìä Analysis Details - ${user.name}</h3>`;
            
            if (analyses.length === 0) {
                details += '<p style="color: var(--color-text-secondary);">No analyses yet</p>';
            } else {
                analyses.forEach((analysis, index) => {
                    const date = new Date(analysis.timestamp).toLocaleString();
                    details += `
                        <div style="background: white; padding: 16px; border-radius: 8px; margin-bottom: 12px; border: 1px solid var(--color-border);">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                <strong>Analysis #${index + 1}</strong>
                                <span class="score-badge ${analysis.score >= 80 ? 'high' : analysis.score >= 60 ? 'medium' : 'low'}">${analysis.score}/100</span>
                            </div>
                            <p style="margin: 4px 0; font-size: 0.9rem;"><strong>üìÖ Date:</strong> ${date}</p>
                            <p style="margin: 4px 0; font-size: 0.9rem;"><strong>üìù Words:</strong> ${analysis.wordCount}</p>
                            <p style="margin: 4px 0; font-size: 0.9rem;"><strong>üîë Keywords:</strong> ${analysis.fullAnalysis.keywordCount}</p>
                            <p style="margin: 4px 0; font-size: 0.9rem;"><strong>Preview:</strong> ${analysis.resumePreview.substring(0, 150)}...</p>
                        </div>
                    `;
                });
            }
            
            document.getElementById('developerConsole').innerHTML += details;
        }

        function exportUserJSON(email) {
            const user = allUsers[email];
            const dataStr = JSON.stringify(user, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `user_${email.split('@')[0]}_data.json`;
            a.click();
            window.URL.revokeObjectURL(url);
        }

        function exportAllUserData() {
            const dataStr = JSON.stringify(allUsers, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'all_users_data.json';
            a.click();
            window.URL.revokeObjectURL(url);
        }

        function calculateAverageScore() {
            let totalScore = 0;
            let count = 0;
            Object.values(allUsers).forEach(user => {
                const analyses = user.analyses || [];
                analyses.forEach(analysis => {
                    totalScore += analysis.score;
                    count++;
                });
            });
            return count > 0 ? Math.round(totalScore / count) : 0;
        }

        function countActiveToday() {
            const today = new Date().toDateString();
            let count = 0;
            Object.values(allUsers).forEach(user => {
                if (user.lastLogin && new Date(user.lastLogin).toDateString() === today) {
                    count++;
                }
            });
            return count;
        }

        function performAnalysis(text) {
            const lowerText = text.toLowerCase();
            const words = text.split(/\s+/).filter(w => w.length > 0);
            const lines = text.split('\n');
            
            // Animate keyword tags with staggered delay
            setTimeout(() => {
                const tags = document.querySelectorAll('.keyword-tag');
                tags.forEach((tag, index) => {
                    tag.style.animationDelay = `${index * 0.05}s`;
                });
            }, 100);
            
            const allKeywords = new Set();
            Object.values(industryKeywords).forEach(industry => {
                industry.skills.forEach(skill => allKeywords.add(skill));
            });
            
            const foundKeywords = [];
            Array.from(allKeywords).forEach(keyword => {
                if (lowerText.includes(keyword.toLowerCase())) {
                    foundKeywords.push(keyword);
                }
            });
            
            const requiredSections = ['experience', 'education', 'skills', 'contact', 'summary', 'work', 'projects'];
            let sectionsFound = 0;
            requiredSections.forEach(section => {
                if (lowerText.includes(section)) {
                    sectionsFound++;
                }
            });
            
            const bulletPoints = lines.filter(line => line.trim().match(/^[‚Ä¢\-\*‚óè]/)).length;
            const hasNumbers = /\d+%|\d+\+|\$\d+|increased|decreased|reduced|improved/i.test(text);
            const hasEmail = /[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/.test(text);
            const hasPhone = /\(?\d{3}\)?[-.\s]?\d{3}[-.\s]?\d{4}/.test(text);
            
            const contentScore = Math.min(100, Math.round((words.length / 500) * 100));
            const keywordScore = Math.min(100, Math.round((foundKeywords.length / 15) * 100));
            const structureScore = Math.min(100, Math.round((sectionsFound / 5) * 100));
            const formatScore = Math.round(((hasEmail ? 25 : 0) + (hasPhone ? 25 : 0) + (bulletPoints > 5 ? 25 : 0) + (hasNumbers ? 25 : 0)));
            
            const overallScore = Math.round((contentScore + keywordScore + structureScore + formatScore) / 4);
            
            return {
                score: overallScore,
                contentScore,
                keywordScore,
                structureScore,
                formatScore,
                wordCount: words.length,
                keywordCount: foundKeywords.length,
                sectionCount: sectionsFound,
                bulletCount: bulletPoints,
                foundKeywords,
                hasEmail,
                hasPhone,
                hasNumbers,
                sectionsFound
            };
        }

        function displayResults(analysis) {
            document.getElementById('atsScore').textContent = analysis.score;
            
            let scoreMessage = '';
            if (analysis.score >= 80) {
                scoreMessage = 'üéâ Excellent! Your resume is highly ATS-compatible!';
            } else if (analysis.score >= 60) {
                scoreMessage = 'üëç Good! Some improvements recommended.';
            } else {
                scoreMessage = '‚ö†Ô∏è Needs improvement for better ATS compatibility.';
            }
            document.getElementById('scoreMessage').textContent = scoreMessage;
            
            document.getElementById('wordCount').textContent = analysis.wordCount;
            document.getElementById('keywordCount').textContent = analysis.keywordCount;
            document.getElementById('sectionCount').textContent = analysis.sectionCount;
            document.getElementById('bulletCount').textContent = analysis.bulletCount;
            
            const analysisSection = document.getElementById('analysisSection');
            analysisSection.innerHTML = '';
            
            if (analysis.hasEmail && analysis.hasPhone) {
                analysisSection.innerHTML += createAnalysisItem('good', '‚úì', 'Contact Information Complete', 
                    'Great! You included both email and phone number.');
            } else {
                analysisSection.innerHTML += createAnalysisItem('error', '‚úó', 'Missing Contact Information', 
                    `Add ${!analysis.hasEmail ? 'email' : ''}${!analysis.hasEmail && !analysis.hasPhone ? ' and ' : ''}${!analysis.hasPhone ? 'phone number' : ''}.`);
            }
            
            if (analysis.sectionCount >= 4) {
                analysisSection.innerHTML += createAnalysisItem('good', '‚úì', 'Well-Structured Resume', 
                    `Found ${analysis.sectionCount} key sections. Good organization!`);
            } else {
                analysisSection.innerHTML += createAnalysisItem('warning', '‚ö†', 'Add More Sections', 
                    `Only ${analysis.sectionCount} sections found. Include: Experience, Education, Skills, Summary.`);
            }
            
            if (analysis.keywordCount >= 10) {
                analysisSection.innerHTML += createAnalysisItem('good', '‚úì', 'Strong Keyword Presence', 
                    `${analysis.keywordCount} industry keywords found. Great for ATS matching!`);
            } else {
                analysisSection.innerHTML += createAnalysisItem('warning', '‚ö†', 'Low Keyword Count', 
                    `Only ${analysis.keywordCount} keywords found. Add more relevant skills and technologies.`);
            }
            
            if (analysis.hasNumbers) {
                analysisSection.innerHTML += createAnalysisItem('good', '‚úì', 'Quantifiable Achievements', 
                    'Great! You included metrics and numbers to demonstrate impact.');
            } else {
                analysisSection.innerHTML += createAnalysisItem('warning', '‚ö†', 'Add Quantifiable Results', 
                    'Include numbers like "Increased sales by 30%" or "Managed team of 5".');
            }

            if (analysis.bulletCount >= 5) {
                analysisSection.innerHTML += createAnalysisItem('good', '‚úì', 'Good Use of Bullet Points', 
                    `${analysis.bulletCount} bullet points found. Helps readability!`);
            }
            
            const keywordsSection = document.getElementById('keywordsSection');
            keywordsSection.innerHTML = '<h3 style="width: 100%; margin-bottom: 12px;">Found Keywords</h3>';
            
            analysis.foundKeywords.slice(0, 15).forEach(keyword => {
                keywordsSection.innerHTML += `<span class="keyword-tag">${keyword}</span>`;
            });
        }

        function matchResume() {
            const resumeText = document.getElementById('resumeTextMatcher').value;
            const jobDesc = document.getElementById('jobDescription').value;
            
            if (!resumeText.trim() || !jobDesc.trim()) {
                alert('Please paste both your resume and job description!');
                return;
            }

            const resumeLower = resumeText.toLowerCase();
            const jobLower = jobDesc.toLowerCase();
            
            const allKeywords = new Set();
            Object.values(industryKeywords).forEach(industry => {
                industry.skills.forEach(skill => allKeywords.add(skill));
            });
            
            const jobKeywords = [];
            Array.from(allKeywords).forEach(keyword => {
                if (jobLower.includes(keyword.toLowerCase())) {
                    jobKeywords.push(keyword);
                }
            });
            
            const matchedSkills = [];
            const missingSkills = [];
            
            jobKeywords.forEach(keyword => {
                if (resumeLower.includes(keyword.toLowerCase())) {
                    matchedSkills.push(keyword);
                } else {
                    missingSkills.push(keyword);
                }
            });
            
            const matchPercentage = jobKeywords.length > 0 
                ? Math.round((matchedSkills.length / jobKeywords.length) * 100) 
                : 0;
            
            document.getElementById('matchFill').style.width = matchPercentage + '%';
            document.getElementById('matchFill').textContent = matchPercentage + '%';
            
            const matchedList = document.getElementById('matchedSkills');
            matchedList.innerHTML = '';
            matchedSkills.forEach(skill => {
                matchedList.innerHTML += `<li style="padding: 8px; background: white; border-left: 3px solid var(--color-success); border-radius: 4px; margin-bottom: 6px;">‚úì ${skill}</li>`;
            });
            
            const missingList = document.getElementById('missingSkills');
            missingList.innerHTML = '';
            missingSkills.forEach(skill => {
                missingList.innerHTML += `<li style="padding: 8px; background: white; border-left: 3px solid var(--color-danger); border-radius: 4px; margin-bottom: 6px;">‚úó ${skill}</li>`;
            });
            
            const matchAnalysis = document.getElementById('matchAnalysis');
            matchAnalysis.innerHTML = '';
            
            if (matchPercentage >= 70) {
                matchAnalysis.innerHTML += createAnalysisItem('good', '‚úì', 'Strong Match!', 
                    `Your resume matches ${matchPercentage}% of job requirements. You're a great fit!`);
            } else if (matchPercentage >= 50) {
                matchAnalysis.innerHTML += createAnalysisItem('warning', '‚ö†', 'Moderate Match', 
                    `${matchPercentage}% match. Consider adding the missing skills listed above.`);
            } else {
                matchAnalysis.innerHTML += createAnalysisItem('error', '‚úó', 'Low Match', 
                    `Only ${matchPercentage}% match. Add more relevant skills from the job description.`);
            }
        }

        function analyzeIndustry() {
            const resumeText = document.getElementById('resumeTextIndustry').value;
            const industry = document.getElementById('industrySelect').value;
            
            if (!resumeText.trim()) {
                alert('Please paste your resume text first!');
                return;
            }

            const resumeLower = resumeText.toLowerCase();
            const industryData = industryKeywords[industry];
            
            const foundSkills = [];
            const missingSkills = [];
            
            industryData.skills.forEach(skill => {
                if (resumeLower.includes(skill.toLowerCase())) {
                    foundSkills.push(skill);
                } else {
                    missingSkills.push(skill);
                }
            });
            
            const industryScore = Math.round((foundSkills.length / industryData.skills.length) * 100);
            
            const analysisDiv = document.getElementById('industryAnalysis');
            analysisDiv.innerHTML = '';
            
            analysisDiv.innerHTML += createAnalysisItem(
                industryScore >= 70 ? 'good' : industryScore >= 50 ? 'warning' : 'error',
                industryScore >= 70 ? '‚úì' : '‚ö†',
                `Industry Optimization: ${industryScore}%`,
                `Your resume contains ${foundSkills.length} out of ${industryData.skills.length} key ${industry} skills.`
            );
            
            const keywordsDiv = document.getElementById('industryKeywords');
            keywordsDiv.innerHTML = '<h3 style="width: 100%; margin-bottom: 12px;">Skills Found in Your Resume</h3>';
            foundSkills.forEach(skill => {
                keywordsDiv.innerHTML += `<span class="keyword-tag" style="background: var(--color-success);">${skill}</span>`;
            });
            
            if (missingSkills.length > 0) {
                keywordsDiv.innerHTML += '<h3 style="width: 100%; margin: 16px 0 8px 0; color: #ef4444;">Suggested Skills to Add</h3>';
                missingSkills.slice(0, 10).forEach(skill => {
                    keywordsDiv.innerHTML += `<span class="keyword-tag" style="background: var(--color-danger);">${skill}</span>`;
                });
            }
        }

        function updateIndustryKeywords() {
            document.getElementById('industryAnalysis').innerHTML = '';
            document.getElementById('industryKeywords').innerHTML = '';
        }

        function createAnalysisItem(type, icon, title, description) {
            return `
                <div class="analysis-item ${type}">
                    <h3>${icon} ${title}</h3>
                    <p>${description}</p>
                </div>
            `;
        }

        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('resumeText').value = e.target.result;
                    alert('‚úÖ File uploaded successfully!');
                };
                reader.readAsText(file);
            }
        }

        function loadExample() {
            const exampleResume = `JOHN DOE
Software Engineer | Full Stack Developer
Email: john.doe@email.com | Phone: (555) 123-4567 | LinkedIn: linkedin.com/in/johndoe

PROFESSIONAL SUMMARY
Results-driven Software Engineer with 3+ years of experience in full-stack development. Proven track record of building scalable web applications and leading cross-functional teams.

EXPERIENCE

Senior Software Developer | Tech Solutions Inc. | Jan 2022 - Present
‚Ä¢ Developed and maintained 5+ enterprise web applications using React, Node.js, and MongoDB
‚Ä¢ Improved application performance by 40% through code optimization and caching strategies
‚Ä¢ Led a team of 4 developers in agile sprints, delivering projects 20% ahead of schedule
‚Ä¢ Implemented automated testing reducing bugs in production by 60%

Software Developer | Digital Innovations LLC | Jun 2020 - Dec 2021
‚Ä¢ Built RESTful APIs serving 100K+ daily active users using Node.js and Express
‚Ä¢ Designed and implemented database schemas for PostgreSQL and MongoDB
‚Ä¢ Reduced API response time by 50% through query optimization

EDUCATION

Bachelor of Science in Computer Science | State University | 2020
GPA: 3.8/4.0 | Dean's List (2018-2020)

SKILLS

Programming: JavaScript, Python, Java, TypeScript, HTML, CSS
Frameworks: React, Node.js, Express, Django, Vue.js
Databases: MongoDB, PostgreSQL, MySQL, Redis
Tools: Git, Docker, AWS, Jenkins, Jira
Methodologies: Agile, Scrum, CI/CD, Test-Driven Development`;

            document.getElementById('resumeText').value = exampleResume;
            document.getElementById('resumeTextMatcher').value = exampleResume;
            document.getElementById('resumeTextIndustry').value = exampleResume;
        }

        function clearAll() {
            document.getElementById('resumeText').value = '';
            document.getElementById('resumeTextMatcher').value = '';
            document.getElementById('resumeTextIndustry').value = '';
            document.getElementById('jobDescription').value = '';
            document.getElementById('atsScore').textContent = '--';
            document.getElementById('wordCount').textContent = '--';
        }

        function exportUserData() {
            const userData = {
                user: currentUser.name,
                email: currentUser.email,
                analyses: currentUser.analyses || []
            };
            
            const dataStr = JSON.stringify(userData, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${currentUser.name.replace(/\s+/g, '_')}_analysis_history.json`;
            a.click();
            window.URL.revokeObjectURL(url);
        }

        // Initialize
        initApp();
    </script>
</body>
</html>
